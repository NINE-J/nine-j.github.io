---
publish: true
 draft: false
title: Java Stream API
description: map() vs flatMap()
author: Nine
date: 2025-04-07
categories:
  - Java
  - ë¬¸ë²•
tags:
  - devlog
  - Java

Status: Done
---
## ğŸ“Œê°œìš”

Java Stream APIëŠ” Java 8ì—ì„œ ë„ì…ëœ ê°•ë ¥í•œ ë°ì´í„° ì²˜ë¦¬ ë„êµ¬ë¡œ,Â `map()`ê³¼Â `flatMap()`ì€ ìŠ¤íŠ¸ë¦¼ ìš”ì†Œë¥¼ ë³€í™˜í•˜ëŠ” í•µì‹¬ ì—°ì‚°ìì´ë‹¤.

ë‘ ë©”ì„œë“œì˜ ì°¨ì´ì ì„ ëª…í™•íˆ êµ¬ë¶„í•˜ê³ , ì‹¤ì œ ì½”ë“œ ì˜ˆì œë¥¼ í†µí•´ í™œìš© ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.
í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° íŒ¨ëŸ¬ë‹¤ì„ì„ ì´í•´í•˜ê³  ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì„ í•™ìŠµí•  ìˆ˜ ìˆë‹¤.

## ğŸ“Œë‚´ìš©

### í•µì‹¬ ê°œë… ë¹„êµ

| íŠ¹ì„±        | `map()`     | `flatMap()`                   |
| --------- | ----------- | ----------------------------- |
| ë³€í™˜ ë°©ì‹     | 1:1 ë³€í™˜      | 1:N ë³€í™˜ + í‰íƒ„í™”                  |
| ì…/ì¶œë ¥ ê´€ê³„   | A â†’ B       | A â†’ [B1, B2, B3] â†’ B1, B2, B3 |
| ë°˜í™˜ íƒ€ì…     | `Stream<R>` | `Stream<R>` (ë‚´ë¶€ ìŠ¤íŠ¸ë¦¼ í’€ì–´ëƒ„)      |
| ì£¼ìš” ì‚¬ìš© ì¼€ì´ìŠ¤ | ë‹¨ìˆœ ê°’ ë³€í™˜     | ì¤‘ì²© ì»¬ë ‰ì…˜ ì²˜ë¦¬, ë‹¤ì¤‘ ê°’ ìƒì„±            |
| ì˜ˆì‹œ        | ë¬¸ìì—´ ê¸¸ì´ ì¶”ì¶œ   | ë¬¸ì¥ì„ ë‹¨ì–´ë¡œ ë¶„í•´                    |

### ë™ì‘ ë°©ì‹

![](/assets/images/Drawing%20Java-StreamAPI-map-and-flatMap%202025-04-07%2014.44.08.excalidraw.png)

#### map()

`map()`ì€ ê° ì›ì†Œë¥¼ 1:1ë¡œ ë³€í™˜í•˜ì—¬ ì›ë³¸ ë°°ì—´ê³¼ ë™ì¼í•œ ê¸¸ì´ì˜ ìƒˆ ë°°ì—´ì„ ë°˜í™˜í•œë‹¤.

- ë‹¨ì¼ ì†ì„± ì¶”ì¶œ, ë‹¨ìˆœ íƒ€ì… ë³€í™˜ ë“± ë‹¨ìˆœ ê³„ì‚°
- 1:1 ë§¤í•‘ì´ ë³´ì¥ëœ ê²½ìš°

```java
// ëŒ€ì†Œë¬¸ì ë³€í™˜
List<String> names = Arrays.asList("java", "stream");
List<String> upperNames = names.stream().map(String::toUpperCase).collect(Collectors.toList());
// ê²°ê³¼: ["JAVA", "STREAM"]
```

#### flatMap()

`flatMap()`ì€ 1:N ë¶„í•´ í›„ í‰íƒ„í™”ë¡œ ê¸¸ì´ë¥¼ ê°€ë³€ì ìœ¼ë¡œ ë§Œë“ ë‹¤.

- ì»¬ë ‰ì…˜ í’€ê¸°, ë¬¸ìì—´ í† í°í™”, Optional ì²´ì´ë‹ ë“±
- í•˜ë‚˜ì˜ ì…ë ¥ì´ ì—¬ëŸ¬ ì¶œë ¥ì„ ìƒì„±í•´ì•¼ í•  ë•Œ

```java
// ë‹¤ì¤‘ ë¦¬ìŠ¤íŠ¸ í‰íƒ„í™”
List<List<Integer>> numberLists = Arrays.asList(
    Arrays.asList(1, 2),
    Arrays.asList(3, 4, 5)
);
List<Integer> allNumbers = numberLists.stream().flatMap(List::stream).collect(Collectors.toList());
// ê²°ê³¼: [1, 2, 3, 4, 5]

// ë¬¸ìì—´ í† í°í™”
List<String> sentences = Arrays.asList("Hello World", "Java Stream");
List<String> words = sentences.stream().flatMap(s -> Arrays.stream(s.split(" "))).collect(Collectors.toList());
// ê²°ê³¼: ["Hello", "World", "Java", "Stream"]
```

#### ë™ì‘ ë°©ì‹ ë¹„êµ

| ì—°ì‚°ì         | ì…/ì¶œë ¥ ê³¼ì •                                                                   | ê¸¸ì´ ë³€í™”      |
| ----------- | ------------------------------------------------------------------------- | ---------- |
| `map()`     | `[A, B]` â†’ `[f(A), f(B)]`                                                 | ìœ ì§€ (n â†’ n) |
| `flatMap()` | `[A, B]` â†’ `[A1, A2, ...] + [B1, B2, ...]` â†’ `[A1, A2, ..., B1, B2, ...]` | ê°€ë³€ (n â†’ m) |

## ğŸ¯ê²°ë¡ 

`flatMap()`ì´ ë” ê°•ë ¥í•˜ì§€ë§Œ, `map()`ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥í•œ ì‘ì—…ì—ëŠ” `map()`ì„ ì‚¬ìš©í•˜ì.
ì¤‘ì²© êµ¬ì¡° ë¶„í•´ë‚˜ 1:NÂ ë³€í™˜ì´ í•„ìš”í•  ë•Œë§Œ `flatMap()`ì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì„±ëŠ¥ê³¼ ê°€ë…ì„± ë©´ì—ì„œ ìœ ë¦¬í•  ê²ƒì´ë‹¤.

### map()

- ë‹¨ì¼ ì†ì„± ì¶”ì¶œ, ë‹¨ìˆœ íƒ€ì… ë³€í™˜ ë“± ë‹¨ìˆœ ê³„ì‚°
- 1:1 ë§¤í•‘ì´ ë³´ì¥ëœ ê²½ìš°
- ì„±ëŠ¥ì´ ë” ì¤‘ìš”í•œ ê²½ìš°

### flatMap()

- ì»¬ë ‰ì…˜ í’€ê¸°, ë¬¸ìì—´ í† í°í™”, Optional ì²´ì´ë‹ ë“±
- í•˜ë‚˜ì˜ ì…ë ¥ì´ ì—¬ëŸ¬ ì¶œë ¥ì„ ìƒì„±í•´ì•¼ í•  ë•Œ
- ë‚´ë¶€ ìŠ¤íŠ¸ë¦¼ ìƒì„± ì˜¤ë²„í—¤ë“œ ì¡´ì¬

### ê°€ë…ì„± vs ê¸°ëŠ¥

- ë‹¨ìˆœ ë³€í™˜ì€ `map()`ì´ ë” ì§ê´€ì 
- ë³µì¡í•œ ë¶„í•´ ë¡œì§ì€ `flatMap()`ì´ ìœ ë¦¬
- ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ `map().flatMap()` ë¶„ë¦¬ ê³ ë ¤

## âš™ï¸EndNote

### í•„ìš”í•œ ì‚¬ì „ ì§€ì‹

1. ëŒë‹¤ í‘œí˜„ì‹: `(x) -> x*2` ê°™ì€ ê°„ê²°í•œ í•¨ìˆ˜ ì •ì˜ ë°©ì‹
2. í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤: `Function<T, R>`, `Predicate<T>` ë“±

### ë” ì•Œì•„ë³´ê¸°

#### ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

- `flatMap()`ì€ ì¤‘ê°„ ìŠ¤íŠ¸ë¦¼ ìƒì„± ì˜¤ë²„í—¤ë“œê°€ ìˆì„ ìˆ˜ ìˆë‹¤.
- ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼(`parallelStream()`)ì—ì„œì˜ ë™ì‘ ì°¨ì´

#### Optionalì˜ `flatMap()`

- `Optional` í´ë˜ìŠ¤ì—ì„œë„ ë™ì¼í•œ ê°œë… ì ìš© ê°€ëŠ¥

```java
Optional.of("hello").flatMap(s -> Optional.of(s.length()));
```

#### Reactivestreamsì™€ì˜ ì—°ê´€ì„±

- RxJava/Project Reactorì—ì„œë„ ìœ ì‚¬í•œ ì—°ì‚°ì ì‚¬ìš©