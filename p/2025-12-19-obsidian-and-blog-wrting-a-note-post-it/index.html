<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="노트가 곧 포스팅"><title>옵시디언과 블로그</title><link rel=canonical href=https://blog.b9f1.com/p/2025-12-19-obsidian-and-blog-wrting-a-note-post-it/><link rel=stylesheet href=/scss/style.min.091d376ab5dee4238ab92c7f42e66ea0d97debe6d5a1f9c3e1e7121f544025d2.css><meta property='og:title' content="옵시디언과 블로그"><meta property='og:description' content="노트가 곧 포스팅"><meta property='og:url' content='https://blog.b9f1.com/p/2025-12-19-obsidian-and-blog-wrting-a-note-post-it/'><meta property='og:site_name' content='B9F1'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='devlog'><meta property='article:tag' content='Obsidian'><meta property='article:tag' content='Blog'><meta property='article:tag' content='Infra'><meta property='article:tag' content='CI/CD'><meta property='article:tag' content='옵시디언'><meta property='article:tag' content='통합배포'><meta property='article:tag' content='유지운영'><meta property='article:tag' content='SSoT'><meta property='article:tag' content='Quartz'><meta property='article:tag' content='Jekyll'><meta property='article:tag' content='Hugo'><meta property='article:tag' content='Submodule'><meta property='article:published_time' content='2025-12-19T03:24:06+09:00'><meta property='article:modified_time' content='2025-12-19T03:24:06+09:00'><meta name=twitter:title content="옵시디언과 블로그"><meta name=twitter:description content="노트가 곧 포스팅"><link rel="shortcut icon" href=/favicon.svg><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7023370172872685" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-MG17SX24X0"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MG17SX24X0")</script><script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-id=b9f1 data-description="Support me on Buy me a coffee!" data-message="👋 Glad to meet you.Buy me a coffee? 😊" data-color=#5F7FFF data-position=Right data-x_margin=18 data-y_margin=18></script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_e091ceea98743e00.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🤌</span></figure><div class=site-meta><h1 class=site-name><a href=/>B9F1</a></h1><h2 class=site-description>Nine's Devlog</h2></div></header><ol class=menu-social><li><a href=https://github.com/NINE-J target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://stackoverflow.com/users/17334807/nine target=_blank title=StackOverflow rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-stackoverflow"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v1a2 2 0 002 2h12a2 2 0 002-2v-1"/><path d="M8 16h8"/><path d="M8.322 12.582l7.956.836"/><path d="M8.787 9.168l7.826 1.664"/><path d="M10.096 5.764l7.608 2.472"/></svg></a></li><li><a href=mailto:rnwo47@gmail.com target=_blank title=ZMail rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/toys/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Toys</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#개요>📌개요</a></li><li><a href=#내용>📌내용</a><ol><li><a href=#블로그-선택-기준>블로그 선택 기준</a><ol><li><a href=#다루기-쉬운가>다루기 쉬운가?</a></li><li><a href=#테마가-다양한가>테마가 다양한가?</a></li></ol></li><li><a href=#jekyll에서-hugo로-전환한-이유>Jekyll에서 Hugo로 전환한 이유</a><ol><li><a href=#hugo-압도적-1위>Hugo 압도적 1위</a></li><li><a href=#quartz-준수한-성능-2위>Quartz 준수한 성능 2위</a></li><li><a href=#jekyll-비교적-느림-3위>Jekyll 비교적 느림 3위</a></li></ol></li><li><a href=#전환하며-만난-문제>전환하며 만난 문제</a></li><li><a href=#무엇을-하고자-하는가>무엇을 하고자 하는가?</a><ol><li><a href=#jekyll에서-hugo로-전환하면서-느낀-것>Jekyll에서 Hugo로 전환하면서 느낀 것</a></li><li><a href=#첨부-파일-관리도-불편>첨부 파일 관리도 불편</a></li></ol></li><li><a href=#어떻게-할-수-있는가>어떻게 할 수 있는가?</a><ol><li><a href=#준비물>준비물</a></li><li><a href=#pocproof-of-concept를-정의해보자>PoC(Proof of Concept)를 정의해보자</a></li><li><a href=#다이어그램>다이어그램</a></li><li><a href=#첨부-파일을-어떻게-관리해야-할까>첨부 파일을 어떻게 관리해야 할까?</a></li><li><a href=#변경-사항을-어떻게-업로드-하지>변경 사항을 어떻게 업로드 하지?</a></li></ol></li><li><a href=#첨부-파일-저장소-만들고-submodule-지정>첨부 파일 저장소 만들고 Submodule 지정</a><ol><li><a href=#첨부-파일-저장소-업로드>첨부 파일 저장소 업로드</a></li><li><a href=#부모-저장소에서-submodule-지정>부모 저장소에서 Submodule 지정</a></li><li><a href=#블로그-저장소에서-submodule-지정>블로그 저장소에서 Submodule 지정</a></li></ol></li><li><a href=#성능이-우려되는데-일단-되는지-보자>성능이 우려되는데 일단 되는지 보자</a></li><li><a href=#obsidian-저장소에서-github-actions-작성>Obsidian 저장소에서 GitHub Actions 작성</a><ol><li><a href=#github-token-설정>GitHub Token 설정</a></li><li><a href=#githubworkflowsdeployyml>.github/workflows/deploy.yml</a></li><li><a href=#파일-탐색-방식-기술-비교>파일 탐색 방식 기술 비교</a></li></ol></li><li><a href=#이미지가-왜-자꾸-안-나와>이미지가 왜 자꾸 안 나와?</a></li><li><a href=#properties-관리>Properties 관리</a></li><li><a href=#상태-유지형-업데이트-개선-방향>상태 유지형 업데이트 개선 방향</a></li></ol></li><li><a href=#결론>🎯결론</a></li><li><a href=#endnote>⚙️EndNote</a><ol><li><a href=#사전-지식>사전 지식</a></li><li><a href=#더-알아보기>더 알아보기</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/devops/>DevOps</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/2025-12-19-obsidian-and-blog-wrting-a-note-post-it/>옵시디언과 블로그</a></h2><h3 class=article-subtitle>노트가 곧 포스팅</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2025-12-19T03:24:06+09:00>2025년 12월 19일</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>20 minute read</time></div></footer></div></header><section class=article-content><h2 id=개요>📌개요</h2><p>옵시디언을 사용하며 블로그는 따로 정리하거나 재작성해서 Velog, Tistory 등 개발 블로그를 업로드 했었다. 그러다 문득 학습하고 정리하면서 블로그에 배포도 되면 편하겠다 생각했다.</p><p>Quartz, Jekyll, Hugo 다양한 정적 사이트 생성기를 알아보며 선택한 기준과 배포해서 사용하다가 불편한 점을 만나 전환한 계기도 간략하게 정리한다.</p><p>거창하게 표현하자면 옵시디언을 SSoT로 삼아 플랫폼에 종속되지 않는 지속 가능한 블로그 아키텍처를 설계한다.</p><p>요약하면 낭만 쉽지 않다.</p><h2 id=내용>📌내용</h2><h3 id=블로그-선택-기준>블로그 선택 기준</h3><p>Velog, Tistory 등 내가 작성하고 게시만 하면 되고 첨부 파일도 신경 쓸 게 없다. 간편하고 좋다.
SSG로 블로그를 운영하다가 다시 돌아가거나 둘 다 운영하는 유저도 많은 것 같다.</p><p>나만의 블로그라는 게 좋아서 정보를 찾아보다가 가장 쉬운 건 Quartz였는데 테마가 아쉬웠다.
적당히 쉽고 테마가 다양하고 빠르게 시작할 수 있어서 처음엔 Jekyll 블로그를 배포했다.</p><h4 id=다루기-쉬운가>다루기 쉬운가?</h4><div class=table-wrapper><table><thead><tr><th>구분</th><th>Quartz</th><th>Jekyll</th><th>Hugo</th></tr></thead><tbody><tr><td>타겟</td><td>옵시디언 사용자</td><td>단순 블로그 입문자</td><td>대규모 사이트/전문가</td></tr><tr><td>설치 편의성</td><td>매우 쉬움</td><td>보통(Ruby 설치 필요)</td><td>쉬움(파일 하나면 끝)</td></tr><tr><td>커스텀 난이도</td><td>쉬움(JS/TS 기반)</td><td>보통(Liquid 문법)</td><td>약간 높음(Go 문법, JS 파츠 가능)</td></tr></tbody></table></div><h4 id=테마가-다양한가>테마가 다양한가?</h4><ol><li>Jekyll<ul><li>가장 오래되어 테마가 수천 개에 달한다. 웬만한 디자인은 이미 누군가 만들었다.</li></ul></li><li>Hugo<ul><li>인기가 많아지면서 세련되고 현대적인 테마가 많아졌다.</li></ul></li><li>Quartz<ul><li>옵시디언 퍼블리싱이라는 특수한 목적에 집중하기 때문에 일반적인 블로그 테마 종류는 적은 것 같다. 대신 소스 수정을 통한 커스텀이 쉽다.</li></ul></li></ol><h3 id=jekyll에서-hugo로-전환한-이유>Jekyll에서 Hugo로 전환한 이유</h3><p>빌드가 너무 느리다.
포스팅 100개도 안 되는데 빌드 시간이 5분 이상 걸리는 것 보고 위기감을 느꼈다.
캐싱이나 빌드 최적화 방법도 다양한데 일단 이런 작업을 해주어야 할 정도로 느리다는 게 불편했다.</p><h4 id=hugo-압도적-1위>Hugo 압도적 1위</h4><ul><li>기술 기반: Go 언어(컴파일 언어)</li><li>성능: 세계에서 가장 빠른 SSG라는 슬로건을 내걸 만큼 빠르다.</li><li>체감 속도: 문서가 1,000개일 때 빌드 시간이 수 초 내외다. 문서가 10,000개가 넘어가도 수 초 안에 빌드가 완료된다고 한다. 대규모 기술 문서 사이트에 Hugo가 가장 많이 쓰이는 이유라고 한다.</li></ul><h4 id=quartz-준수한-성능-2위>Quartz 준수한 성능 2위</h4><ul><li>기술 기반: TS/Node.js(하이브리드, 컴파일/트랜스파일 + JIT 컴파일)</li><li>성능: Hugo만큼은 아니지만 상당히 빠르다. 내부적으로 캐싱 시스템이 잘 되어 있어 변경된 부분만 빠르게 업데이트한다.</li><li>체감 속도: 수백~수천 개의 옵시디언 노트를 처리하기에 충분히 쾌적하다. 다만 복잡한 JS 플러그인을 많이 추가할 수록 조금씩 느려질 수 있다.</li></ul><h4 id=jekyll-비교적-느림-3위>Jekyll 비교적 느림 3위</h4><ul><li>기술 기반: Ruby (인터프리터 언어)</li><li>성능: 구조적인 한계로 문서 양이 많아지면 속도가 눈에 띄게 저하된다.</li><li>체감 속도: 문서가 수천 개를 넘어가면 빌드에 몇 십 분 단위가 걸리기도 한다. 증분 빌드 기능이 있지만 다른 SSG에 비해 느리다.</li></ul><h3 id=전환하며-만난-문제>전환하며 만난 문제</h3><p>블로그 전환하면서 문서의 속성 값이 문제가 됐었다.
카테고리를 작성하는데 4~5레벨 이상 허용하는 테마도 있고 그렇지 않은 것도 있다.</p><p>그냥 세분화한 카테고리가 제대로 적용만 안 되는 거면 수정 없이 사용하겠는데 빌드가 안 되거나 문서가 깨지는 등 문제가 있었다.</p><p>근데 작성된 문서가 많다면 일괄 편집 프로그램을 찾거나 직접 커스텀하게 만들어서 사용해야 할 것이다.</p><p>다행히 DataView 플러그인으로 카테고리는 따로 관리하고 있었고 문서가 엄청 많은 상태는 아니어서 속성의 카테고리를 다 제거했다.</p><p>그리고 Hugo 테마에 맞게 정리해서 일단락되었다.</p><link rel=stylesheet href=/css/vendors/admonitions.5c21d3611305826ca76e50bf22bdda6ed74f2f81d26216e9166f9ae104f2e27a.css integrity="sha256-XCHTYRMFgmynblC/Ir3abtdPL4HSYhbpFm+a4QTy4no=" crossorigin=anonymous><div class="admonition tip"><div class=admonition-header><svg viewBox="0 0 384 512"><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2 5.2-7.1 10.4-14.2 15.4-21.4 19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2.0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3 5 7.2 10.2 14.3 15.4 21.4 19.8 27.1 39.7 54.4 49.2 86.2h160zM192 512c44.2.0 80-35.8 80-80v-16H112v16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112 8.8.0 16 7.2 16 16s-7.2 16-16 16c-44.2.0-80 35.8-80 80z"/></svg>
<span>Tip</span></div><div class=admonition-content><p><code>DataView</code> 플러그인은 DQL(Dataview Query Language, SQL과 굉장히 비슷하다), DataviewJS(JavaScript) 언어로 사용할 수 있다.
쿼리가 익숙하든 JS가 익숙하든 편한 걸로 사용하면 될 것 같다.</p><p>직관적인 이름에 걸맞게 옵시디언에서 관리하는 문서들의 데이터를 가지고 내가 원하는 뷰를 만들 수 있다.</p></div></div><p><img src=/assets/images/Pasted%20image%2020251219044301.png loading=lazy></p><h3 id=무엇을-하고자-하는가>무엇을 하고자 하는가?</h3><ol><li>플랫폼에 종속되지 않는 문서 관리가 가능한지 고민하고 최대한 표준화하려고 한다.</li><li>첨부 파일을 양쪽에서 관리하는데 이건 좀 문제가 있다.</li><li><code>PARA</code> 정리법을 적용해서 잘 사용하고 있기 때문에 경로가 메인이 되면 안 된다. 관리될 수 있는 속성을 정의해야 한다.</li></ol><h4 id=jekyll에서-hugo로-전환하면서-느낀-것>Jekyll에서 Hugo로 전환하면서 느낀 것</h4><p>Templater 플러그인을 사용해서 문서 성격에 따라 개인적으로 필요한 양식은 표준화 했지만 이런 전환점에선 수정이 불가피하다.</p><p>정착할 수 있다면 좋겠지만 언제든 맘 편히 전환할 수 있는 기반을 만들고 싶다.</p><h4 id=첨부-파일-관리도-불편>첨부 파일 관리도 불편</h4><h5 id=어디에-둬야-하는-거야>어디에 둬야 하는 거야?</h5><p>호스팅으로 빼서 URL을 사용하는 등 써드 파티를 적용한 사례도 많다. 무료 이미지 호스팅 사용하다가 사이트가 없어져서 이미지 다 날린 케이스도 있고 비교적 안전하게 운영되고 있는 imgur 플러그인 소개도 가끔 보인다.
나는 가장 간편하고 안전하게 볼트 내에서 첨부 파일 폴더를 따로 관리하려고 한다.</p><h5 id=문법은-왜-달라>문법은 왜 달라?</h5><p>왜 불편하냐면 옵시디언에서 붙여 넣거나 링크한 건 이런 위키링크 형태다.</p><ul><li><code>![[location/image.png]]</code></li></ul><p>Markdown 문법이 기대하는 이미지 첨부는 이런 형태다.</p><ul><li><code>![alt](location/image.png)</code></li></ul><p>사실 이건 설정에서 끌 수 있고 직접 만들어서 간단히 치환하는 방법을 사용할 수도 있다.
<code>설정 > Options/Files and Links > Use[[WikiLinks]]</code> 이거 비활성화 하면 기본 마크다운 형태로 삽입할 수 있다.</p><p>지금 가장 불편한 건 낭만 따라간답시고 일 벌린 다음 잘못 관리하고 있는 것이다.</p><ol><li>옵시디언에서 신나게 이미지 넣고 작성한다.</li><li>Hugo 블로그 저장소에 문서 옮기고 이미지도 옮기고 링크 맞추고..</li><li>오탈자 없나, 깨지는 건 없나 검토하는 단계로 합리화하기.</li></ol><p>이렇게 불편함이 많아지면 포스팅 하나 작성해볼까? 하는 데에 결심이 필요해진다. 안 된다. 개선이 필요하다.</p><div class="admonition tip"><div class=admonition-header><svg viewBox="0 0 384 512"><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2 5.2-7.1 10.4-14.2 15.4-21.4 19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2.0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3 5 7.2 10.2 14.3 15.4 21.4 19.8 27.1 39.7 54.4 49.2 86.2h160zM192 512c44.2.0 80-35.8 80-80v-16H112v16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112 8.8.0 16 7.2 16 16s-7.2 16-16 16c-44.2.0-80 35.8-80 80z"/></svg>
<span>Tip</span></div><div class=admonition-content><p><strong>PARA란?</strong> (PARA method)
디지털 자료를 관리하는 하나의 방법론이다.</p><p>하나의 경로에 고정되는 데이터가 아니라 현재 내 관심사에 따라 Project, Resources 폴더로 왔다가 Area, Archive로 갔다가 유연하게 문서가 움직인다.</p><p>PARA의 자료들은 계속해서 이동하며 장기 기억으로 가져가야 할 데이터, 데드라인을 명확히 하고자 하는 프로젝트, 우선 순위를 재조정 한다거나 계속한 상관 관계에 있다.
한 곳으로 옮긴 이후 완료되거나 포기하면 죽는 데이터가 아니라 계속해서 돌아가는 자원이 되는 방식쯤으로 이해한다.</p><ul><li><strong>Project</strong><ul><li>데드라인이 정해진 작업 즉, <strong>완료가 필요한 것들</strong></li></ul></li><li><strong>Area</strong><ul><li><strong>데드라인이 명확하지 않은</strong> 관리하는 것들의 영역</li><li>ex) 건강, 재정, 공부 등..</li></ul></li><li><strong>Resource</strong><ul><li>지속적으로 관심을 가지는 주제의 자료들</li><li><strong>Area를 이루기 위한 것들</strong></li></ul></li><li><strong>Archive</strong><ul><li>위의 것들 중 마무리 지었거나 더이상 사용하지 않는 것들을 <strong>보관</strong></li></ul></li></ul></div></div><h3 id=어떻게-할-수-있는가>어떻게 할 수 있는가?</h3><p>내가 게시할 문서만 동기화하는 건 그리 복잡하지 않겠지만 외부 호스팅 의존이 필요한 이미지가 문제였다.</p><ul><li>그냥 이미지 Base64로 박아버리면 첨부 파일 따로 안 해도 되잖아?<ul><li>미리 보기 모드가 아닌 수정 모드에서 엄청난 스압을 만나고 문서 용량도 커진다.</li><li>확장자를 달고 링크된 이미지가 아니라서 CPU가 열일하는 모습을 볼 수 있다.</li><li>이미 이미지 압축, 스압 줄여주는 플러그인도 있다. ㅋㅋ</li></ul></li></ul><blockquote><p>이것저것 고민해보다가 나중에 또 개선해야 하는 거 너무 깊게 고민하지 않기로 했다.</p></blockquote><h4 id=준비물>준비물</h4><ul><li>옵시디언 볼트<ul><li>GitHub 저장소로 올리고 Private/Public 나눠야 할 수도 있다.</li><li>GitHub 저장소의 이미지 서빙 기능을 활용하기 위해 이미지 저장소를 따로 만들어야 할 수도 있다.</li></ul></li><li>Hugo 블로그 저장소<ul><li>GitHub Pages로 배포</li></ul></li></ul><h4 id=pocproof-of-concept를-정의해보자>PoC(Proof of Concept)를 정의해보자</h4><p>이번 아키텍처의 핵심 목적은 문서를 복사하거나 이미지를 옮기는 수동 작업을 없애고 옵시디언의 PARA 체계를 유지하면서 특정 속성만으로 블로그를 배포하는 것.</p><h5 id=검증-과제>검증 과제</h5><ul><li>파일 선별:<ul><li>보관함 전체가 아닌 <code>publish: true</code> 속성을 가진 파일만 추출 가능한가?</li><li>공개되지 않아야 하는 것들을 분리할 수 있는가?</li></ul></li><li>경로 동기화:<ul><li>Git Submodule을 통해 옵시디언의 첨부 파일과 Hugo 저장소의 첨부 파일을 물리적으로 일치 시킬 수 있는가?</li><li>GitHub 저장소 자체가 호스팅 서버 역할을 하며 Hugo가 빌드 과정에서 상대 경로를 기반으로 URL을 생성하는가?</li></ul></li><li>문법 변환: 옵시디언 전용 문법(Callouts 등)을 Hugo가 이해하는 표준 마크다운이나 숏코드로 자동 치환 가능한가?</li><li>배포 자동화: 가벼운 명령어로 빌드 및 배포가 완료되는가?</li></ul><h4 id=다이어그램>다이어그램</h4><div class="mermaid-container zoomable"><pre class=mermaid>
    graph TD
    %% 상단: 소스 관리 (Private)
    subgraph Source_Private
        Obs[Obsidian_Repo]
    end

    %% 중단: 공유 자원 (Public)
    subgraph Shared_Resources
        Assets[Assets_Repo]
    end

    %% 하단: 배포 엔진 (Public)
    subgraph Deployment_Public
        Hugo[Hugo_Repo]
    end

    %% 관계 설명 (서브모듈 포함 관계)
    Assets --- |Submodule| Obs
    Assets --- |Submodule| Hugo

    %% 데이터 흐름 (CI/CD)
    Obs -.-> |"Filter(publish:true) & Push"| Hugo

    %% 스타일링
    style Obs fill:#fff4dd,stroke:#d4a017,stroke-width:2px
    style Assets fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    style Hugo fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
  </pre></div><div class="mermaid-container zoomable"><pre class=mermaid>
    sequenceDiagram
    participant Obs as Obsidian_Repo (Private Vault)
    participant ObsAction as GitHub_Actions (Obsidian Repo)
    participant AssetRepo as Assets_Repo (Submodule / Public)
    participant HugoRepo as Hugo_Repo (Public, GitHub Pages)

    Note over Obs: 문서 작성 (Properties에 publish: true 추가)
    Obs->>Obs: git push (Private Repo로)
    
    Obs->>ObsAction: 1. Push 이벤트 트리거
    
    rect rgb(240, 240, 240)
        Note over ObsAction: [추출 및 변환 단계]
        ObsAction->>ObsAction: 2. 보관함 스캔 (publish: true 검색)
        ObsAction->>ObsAction: 3. 마크다운 변환 (WikiLink -> MarkDown, 또는 설정으로 대체)
    end

    ObsAction->>AssetRepo: 4. 신규 이미지 Push (Submodule 업데이트)
    
    ObsAction->>HugoRepo: 5. 추출된 글(md) & 이미지 링크 전달 (Git Push)

    Note over HugoRepo: [자동 배포 단계]
    HugoRepo->>HugoRepo: 6. Hugo 빌드 프로세스 시작
    Note over HugoRepo: 7. 빌드 결과물(HTML) 생성 및 호스팅 시작

    Note over HugoRepo: https://ID.github.io 접속 가능
  </pre></div><h4 id=첨부-파일을-어떻게-관리해야-할까>첨부 파일을 어떻게 관리해야 할까?</h4><ol><li>옵시디언 볼트에서 관리 중인 Assets 폴더를 저장소로 만들어 원격에 업로드</li><li>Assets 원격 저장소를 옵시디언 볼트의 Submodule로 지정</li><li>하게 되면 git은 Submodule을 특별하게 취급기 때문에 따로 <code>.gitignore</code> 파일에 Assets 폴더를 추가하지 않아도 된다.</li><li>이미지를 추가하는 경우 Submodule 폴더인 Assets 폴더에 추가.</li><li>옵시디언 프로그램에서 복사한 이미지 붙여 넣기의 경우 설정에 의해 지정된 경로에 이미지가 생성된다. Submodule 폴더인 Assets 폴더로 지정. 3과 동일하게 동작</li></ol><h4 id=변경-사항을-어떻게-업로드-하지>변경 사항을 어떻게 업로드 하지?</h4><p>이후 옵시디언 볼트에서 작업 후 변경 사항을 push하려면?</p><ol><li>Assets 저장소를 먼저 push. 명령어 만들어두면 편할 듯? 편해? 이게?<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> Assets <span class=o>&amp;&amp;</span> git add . <span class=o>&amp;&amp;</span> git commit -m <span class=s2>&#34;update assets: {{date}}&#34;</span> <span class=o>&amp;&amp;</span> git push
</span></span><span class=line><span class=cl><span class=nb>cd</span> ..
</span></span><span class=line><span class=cl>git add . <span class=o>&amp;&amp;</span> git commit -m <span class=s2>&#34;vault backup: {{date}}&#34;</span> <span class=o>&amp;&amp;</span> git push
</span></span></code></pre></td></tr></table></div></div></li><li>Assets 업데이트 된 후 옵시디언 볼트 push</li><li>옵시디언 원격 저장소의 GitHub Actions 실행된다.</li><li>GitHub Actions는 기능 수행만 하는 것이 아니라 임시 서버가 된다.</li><li>GitHub Actions 실행되는 환경 안에서<ol><li>새롭게 포스팅 되어야 하는 문서들 필터링. 조건은 <code>publish: true</code> 뿐인데 이미 게시된 건 어떻게 알고 새로운 것만 배포에 사용하지?<ol><li>방식 A: 전체 덮어쓰기(가장 확실)<ul><li>배포할 때마다 Hugo 저장소의 <code>content/posts</code> 폴더를 비운다.</li><li>현재 Obsidian에서 <code>publish: true</code>인 모든 파일을 다시 복사해서 넣는 방식</li><li><strong>장점</strong>: 상태 관리가 필요 없고 Obsidian에서 <code>publish: false</code>로 바꾼 글이 블로그에서 자동으로 사라진다.</li><li><strong>단점</strong>: 파일이 아주 많아진다면 아주 미세하게 시간이 더 걸리지만, Hugo와 Git은 변경되지 않은 파일은 무시하므로 효율적</li></ul></li><li>방식 B: 파일 비교(증분 방식)<ul><li><code>git diff</code> 명령어를 사용하여 마지막 배포 커밋 이후 변경되거나 추가된 파일만 찾기</li><li>하지만 이 방식은 Obsidian에서 글을 수정했을 때 블로그에 반영하기가 까다로워 보통 <strong>방식 A</strong>를 권장합니다.</li></ul></li></ol></li><li>Obsidian 저장소와 Hugo 저장소를 동시에 Clone<ol><li>필터링 스크립트 실행 (Python이나 Shell 스크립트)</li><li>찾은 파일들을 Hugo 저장소의 <code>content/posts</code> 경로로 복사</li><li>Actions 서버가 사용자 권한을 가지고 Hugo 저장소에 원격 Push</li></ol></li><li>이미지 관리<ol><li>물리적 전송은 없다.</li><li>1번 단계에서 Assets를 원격에 업로드했기 때문에 Hugo 저장소는 빌드될 때 Assets Submodule의 최신 커밋을 바라보게만 설정</li><li>Hugo 저장소의 배포 Actions가 실행될 때 <code>git submidule update --remote</code> 명령어를 수행하여 최신 이미지를 스스로 긁어오기</li></ol></li></ol></li></ol><h3 id=첨부-파일-저장소-만들고-submodule-지정>첨부 파일 저장소 만들고 Submodule 지정</h3><p>이 저장소는 이제 옵시디언 볼트 저장소와 블로그 배포 저장소에서 서브 모듈로 활용하게 된다.</p><h4 id=첨부-파일-저장소-업로드>첨부 파일 저장소 업로드</h4><ol><li><code>[Obsidian Vault]/[attachment location]</code> 안의 소스를 잠시 백업</li><li>별도 저장소로 업로드</li></ol><h4 id=부모-저장소에서-submodule-지정>부모 저장소에서 Submodule 지정</h4><ol><li>Obsidian 루트 폴더에서 해당 폴더를 삭제하거나 이름을 변경</li><li>서브 모듈 등록<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git submodule add <span class=o>[</span>원격_저장소_URL<span class=o>]</span> <span class=o>[</span>로컬에서_사용할_경로<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>등록 중 멈추는 경우 한 번에 주고 받을 수 있는 데이터의 용량 제한 때문일 수 있다. 부모 저장소에서 데이터 용량 제한을 늘린다.<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 버퍼 크기를 낭낭하게 500MB로 설정</span>
</span></span><span class=line><span class=cl>git config --global http.postBuffer <span class=m>524288000</span>
</span></span></code></pre></td></tr></table></div></div></li><li>그럼 로컬 앱에선 이미지가 잘 표현된다.</li></ul></li></ol><p>서브 모듈에 변경이 발생하면 부모 저장소에서도 변경 사항이 있다고 표시된다.
내용은 없지만 서브 모듈의 최신 상태를 바라보기 위한 포인터가 변경되는 거라고 한다.</p><p>서브 모듈 커밋 업로드, 부모 저장소에서 업데이트 두 번의 작업을 해야 하니 그냥 부모 저장소에선 서브 모듈의 변경을 무시하고 GitHub Actions에서 항상 서브 모듈의 최신 상태를 바라보도록 설정해야겠다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 서브모듈의 포인터 변화(커밋 변경)를 무시하도록 설정</span>
</span></span><span class=line><span class=cl>git config -f .gitmodules submodule.<span class=s2>&#34;[로컬에서_사용할_경로]&#34;</span>.ignore all
</span></span></code></pre></td></tr></table></div></div><p>명령어가 정상적으로 실행되면 <code>.gitmodules</code> 파일에 다음과 같이 기록된다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[submodule &#34;[로컬에서_사용할_경로]&#34;]
</span></span><span class=line><span class=cl>	path = [로컬에서_사용할_경로]
</span></span><span class=line><span class=cl>	url = [원격_저장소_URL]
</span></span><span class=line><span class=cl>	ignore = all
</span></span></code></pre></td></tr></table></div></div><p>만약 지정하다가 실수하면 <code>.gitmodules</code>, <code>.git/config</code> 여기저기 기록이 남기 때문에 깔끔하게 지우는 절차가 중요하다.</p><ol><li>해당 경로를 제거</li><li><code>.git/modules/</code> 내부 보관소에서 서브 모듈 데이터 삭제</li><li>실제 폴더가 남아있다면 물리적으로 삭제</li><li>필요하다면 변경 사항 커밋</li><li>올바르게 다시 등록<ol><li>만약 이미 존재하는 폴더라는 오류가 발생한다면 캐시를 비워야 할 수도 있다.</li></ol></li></ol><h4 id=블로그-저장소에서-submodule-지정>블로그 저장소에서 Submodule 지정</h4><p>또 문제가 있다. 계획대로라면</p><ol><li>이제 첨부 파일은 서브 모듈로 분리해서 관리</li><li>배포 시 post 경로는 새롭게 비운 뒤 업데이트</li></ol><p>수동으로 낭만 있게 관리한다고 합리화하며 다음과 같은 트리로 관리하고 있던 구조를 바꿔야 한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Hugo_Blog/content/post
</span></span><span class=line><span class=cl>├─ [YEAR]
</span></span><span class=line><span class=cl>│  ├─ [MONTH]
</span></span><span class=line><span class=cl>│  │  └─ [DATE-TITLE]
</span></span><span class=line><span class=cl>│  │    ├─ index.md
</span></span><span class=line><span class=cl>│  │    ├─ image1.[jpg|png]
</span></span><span class=line><span class=cl>│  │    └─ image2.[jpg|png]
</span></span><span class=line><span class=cl>│  └─ ...
</span></span><span class=line><span class=cl>├─ ...
</span></span><span class=line><span class=cl>└─ README.md
</span></span></code></pre></td></tr></table></div></div><p>일단 백업해두고 한 번 비우고 배포 돌리면 채워지겠지 뭐.</p><ul><li>문서는 <code>content/post</code></li><li>정적 파일은 <code>static/assets/images</code>, 이게 서브 모듈</li></ul><h3 id=성능이-우려되는데-일단-되는지-보자>성능이 우려되는데 일단 되는지 보자</h3><p>지금 계획은 Obsidian 커밋과 업로드 이후 GitHub Actions가 동작한다.
다음과 같은 작업이 필요하고 $O(n)$의 복잡도를 가지게 된다.</p><ol><li>그나마 최적화를 위해 모든 문서의 상단만 읽고 게시 가능한지 판단</li><li><code>http</code>, <code>https</code> 등으로 시작하는 이미 외부 URL인 것을 제외한 로컬에서 등록한 이미지라고 판단되는 것들을 Hugo 구조에 맞게 치환</li></ol><p>간단히 최적화 방안이 있는지만 확인</p><ul><li>PARA 체계를 이용하지만 대부분 Resource에서 작업하니까 여기만 스캔</li><li>Area, Archive 갔다가 문서 개정이 필요한 경우 Resource로 옮겨서 배포 후 정리</li><li><code>grep</code>을 활용한 고속 필터링: 모든 파일을 열어서 내용을 확인하는 대신 파일 시스템 레벨에서 게시 가능 플래그를 포함한 파일 목록만 먼저 뽑기<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 내용에 &#39;publish: true&#39;가 포함된 파일 리스트만 추출</span>
</span></span><span class=line><span class=cl>grep -l <span class=s2>&#34;publish: true&#34;</span> *.md &gt; publish_list.txt
</span></span></code></pre></td></tr></table></div></div></li><li><code>sed</code> 또는 <code>perl</code> 이용한 일괄 치환: 파일을 하나씩 열어 저장하는 방식이 아니라 스트림 방식으로 메모리에서 바로 치환. 이런 식으로<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># http 또는 https로 시작하지 않는(?!http) 이미지 링크만 타겟팅</span>
</span></span><span class=line><span class=cl>perl -i -pe <span class=s1>&#39;s/!\[\[(?!https?:\/\/)(.*?)\]\]/!\[\[\/assets\/$1\]\]/g&#39;</span> <span class=o>[</span>대상파일<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div></li><li>Git Diff를 활용한 증분 배포<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 마지막 커밋 이후 바뀐 파일만 골라내기</span>
</span></span><span class=line><span class=cl>git diff --name-only HEAD~1
</span></span></code></pre></td></tr></table></div></div></li></ul><p>이걸로 기대할 수 있는 것?
복잡도는 $O(n)$이지만 실제 작업량$(n)$을 필터링으로 줄이고 작업 속도를 스트림 처리로 극대화</p><ol><li>PARA 체계와 <code>grep</code>의 시너지<ul><li>전체 문서에서 Resource로 스캔 범위 제한</li><li><code>grep</code>은 파일을 메모리에 다 올리지 않고 바이너리 수준에서 패턴만 훑고 지나가기 때문에 수천 개의 파일을 찾아도 거의 파일 시스템 탐색 속도와 맞먹음</li></ul></li><li><code>perl</code> 스트림 처리로 속도 최적화<ul><li>파일을 열고 닫는 오버헤드가 없음</li><li>한 줄씩 흐르듯 지나가며 치환하므로 텍스트 데이터 처리에 있어서는 이론적으로 최대 속도</li></ul></li><li>Git Diff 증분 배포<ul><li>$(n)$을 전체 문서-Resource-오늘 내가 수정한 문서로 범위 제한</li><li>문서가 많아져도 오늘 3개만 작업했다면 작업량은 3개뿐</li></ul></li></ol><p>그 다음으로 고민해볼 것</p><ul><li>이미지 존재 여부 체크: 치환된 이미지 파일이 실제 서브 모듈에 있는지 체크하여 누락된 이미지가 있다면 빌드 타임에 경고</li><li><code>rsync</code> 활용: 파일이 변경된 경우에만 복사하므로 I/O를 한 번 더 아낄 수 있음</li></ul><h3 id=obsidian-저장소에서-github-actions-작성>Obsidian 저장소에서 GitHub Actions 작성</h3><ol><li><code>publish: true</code>인 파일만 골라낸다.</li><li>위키 링크를 표준 마크다운으로 바꾸고 이미지 경로를 <code>assets</code>로 변경</li><li>가공된 파일을 Hugo 저장소로 보내기, 이후 Hugo 저장소에서 빌드 트리거</li></ol><h4 id=github-token-설정>GitHub Token 설정</h4><p>Obsidian 저장소가 Hugo 저장소에 접근하여 파일을 push해야 하므로 PAT(Personal Access Token) 필요</p><ul><li><code>GitHub 설정 > Developer settings > Personal access tokens</code>에서 생성<ul><li>권한: repo 전체</li></ul></li><li>생성한 토큰을 Obsidian 저장소의 <code>Settings > Secrets and variable > Actions</code>에 등록</li></ul><h4 id=githubworkflowsdeployyml>.github/workflows/deploy.yml</h4><div class="admonition info"><div class=admonition-header><svg viewBox="0 0 512 512"><path d="M256 512A256 256 0 10256 0a256 256 0 100 512zM216 336h24v-64h-24c-13.3.0-24-10.7-24-24s10.7-24 24-24h48c13.3.0 24 10.7 24 24v88h8c13.3.0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3.0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 110 64 32 32 0 110-64z"/></svg>
<span>Info</span></div><div class=admonition-content><p>v1.0.2까지 기록됨</p><p>현재 버전은 위키링크 변환 시 OS에서 허용하는 파일명의 특수 기호, 공백 등을 고려하지 않아 문제가 발생할 수 있음.</p><p>이후 저장소 문서로 관리 예정.</p><ul><li>옵시디언의 위키링크와 로컬 이미지 경로를 AST 기반 Node 변환 스크립트로 표준 마크다운 및 형식으로 변환하도록 구현</li><li><code>deploy.yml</code>에서 기존 Perl 치환을 제거하고 해당 스크립트 호출로 교체</li></ul></div></div><ol><li>트리거 및 타겟팅 제어<ul><li>특정 경로 감시: <code>02.Resource/**</code> 폴더 내의 변경 사항이 발생할 때만 배포가 실행되도록 제한하여 불필요한 빌드를 방지한다.</li><li>멀티 저장소 체크아웃: 옵시디언 저장소뿐만 아니라 배포 대상인 Hugo 저장소를 동시에 관리한다.</li></ul></li><li>파일 스캐닝 (awk 활용)<ul><li>조건부 배포 필터링: 모든 파일을 배포하는 것이 아니라, 파일 상단 15줄 이내에 publish: true 또는 false 설정이 있는 파일만 추출한다.</li></ul></li><li>경로 확장성: 주석 처리를 통해 03.Area, 04.Archive 등 다른 PARA 폴더로의 확장 가능성</li><li>마크다운 변환 (Perl 정규식 활용)<ul><li>코드 블록 보호: 변환 시 코드 블록(&mldr;) 내부나 인라인 코드는 건드리지 않도록 스킵 로직 적용</li><li>링크 체계 자동 보정: 옵시디언 전용 위키링크를 표준 마크다운 이미지 링크로 변환</li><li>모든 로컬 이미지 경로를 Hugo 기준으로 자동 보정</li></ul></li><li>Front Matter 동적 변환: publish 상태값에 따라 Hugo가 인식하는 draft 필드(true/false)를 자동으로 삽입하여 배포 상태를 동기화</li><li>동기화 및 업서트 (UPSERT)<ul><li><code>rsync</code> 체크섬 비교: 단순히 파일을 덮어쓰는 것이 아니라, <code>--checksum</code> 옵션을 통해 실제 내용의 변경이 있는 파일만 선별적으로 업데이트</li><li>임시 스테이징: <code>temp_posts</code> 폴더에서 모든 변환 작업을 마친 후 최종본만 대상 저장소에 동기화하여 안정성 확보</li></ul></li><li>자동 커밋 및 배포 최적화<ul><li>변경 감지: <code>git diff --cached --quiet</code> 명령을 사용하여 실제로 변경된 내용이 있을 때만 커밋을 생성</li><li>이력 추적: 커밋 메시지에 배포 시각을 포함하여 버전 관리를 용이하게 한다.</li></ul></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Posts to Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>main </span><span class=w> </span><span class=c># 브랜치명</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>paths</span><span class=p>:</span><span class=w> </span><span class=c># PARA 체계 중 배포 대상이 포함된 폴더만 감시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;02.Resource/**&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c>#     - &#39;03.Area/**&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c>#     - &#39;04.Archive/**&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout Obsidian Vault</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w> </span><span class=c># 증분 배포(diff)를 위해 전체 이력 가져오기</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Hugo Repo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>계정]/[Hugo_저장소_이름]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.HUGO_DEPLOY_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>hugo-dest</span><span class=w> </span><span class=c># Hugo 저장소를 임시 폴더에 체크아웃</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Filter and Transform Posts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          # 1. 폴더를 비우지 않고, 변환 작업을 위한 임시 스테이징 폴더 생성
</span></span></span><span class=line><span class=cl><span class=sd>          mkdir -p temp_posts
</span></span></span><span class=line><span class=cl><span class=sd>          mkdir -p hugo-dest/content/post/ # 대상 폴더가 없을 경우 대비
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          # 2. 하위 폴더 탐색 및 awk 실행
</span></span></span><span class=line><span class=cl><span class=sd>          # shopt -s globstar: ** 패턴 사용을 위한 셸 옵션 활성화
</span></span></span><span class=line><span class=cl><span class=sd>          shopt -s globstar 
</span></span></span><span class=line><span class=cl><span class=sd>          
</span></span></span><span class=line><span class=cl><span class=sd>          PUBLISH_FILES=$(awk &#39;
</span></span></span><span class=line><span class=cl><span class=sd>            FNR &lt;= 15 &amp;&amp; /publish: (true|false)/ { print FILENAME; nextfile }
</span></span></span><span class=line><span class=cl><span class=sd>            FNR &gt; 15 { nextfile }
</span></span></span><span class=line><span class=cl><span class=sd>          # 스캔 범위 02.Resource로 제한할 때 활성화
</span></span></span><span class=line><span class=cl><span class=sd>          &#39; 02.Resource/**/*.md || true)
</span></span></span><span class=line><span class=cl><span class=sd>          # 스캔 범위 일시적으로 늘릴 때 활성화
</span></span></span><span class=line><span class=cl><span class=sd>          #&#39; 02.Resource/**/*.md 03.Area/**/*.md 04.Archive/**/*.md || true)
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          if [ -z &#34;$PUBLISH_FILES&#34; ]; then
</span></span></span><span class=line><span class=cl><span class=sd>            echo &#34;배포 대상 파일이 없습니다.&#34;
</span></span></span><span class=line><span class=cl><span class=sd>            exit 0
</span></span></span><span class=line><span class=cl><span class=sd>          fi
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          # 3. 파일 복사 및 변환 대상을 temp_posts로 지정
</span></span></span><span class=line><span class=cl><span class=sd>          # 공백이 포함된 파일명을 안전하게 처리하기 위해 IFS 설정
</span></span></span><span class=line><span class=cl><span class=sd>          SAVEIFS=$IFS
</span></span></span><span class=line><span class=cl><span class=sd>          IFS=$&#39;\n&#39;
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          for file in $PUBLISH_FILES; do
</span></span></span><span class=line><span class=cl><span class=sd>            # 파일명만 추출
</span></span></span><span class=line><span class=cl><span class=sd>            filename=$(basename &#34;$file&#34;)
</span></span></span><span class=line><span class=cl><span class=sd>            # hugo-dest가 아닌 임시 폴더(temp_posts)에 먼저 복사
</span></span></span><span class=line><span class=cl><span class=sd>            dest=&#34;temp_posts/$filename&#34;
</span></span></span><span class=line><span class=cl><span class=sd>            
</span></span></span><span class=line><span class=cl><span class=sd>            # 복사 (파일 경로에 따옴표 필수)
</span></span></span><span class=line><span class=cl><span class=sd>            cp &#34;$file&#34; &#34;$dest&#34;
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            # 4. Perl 통합 치환 (코드 블록 보호 및 경로 보정)
</span></span></span><span class=line><span class=cl><span class=sd>            # - 동적 백틱 개수 대응: 시작한 백틱 개수만큼 닫는 백틱이 나올 때까지 스킵
</span></span></span><span class=line><span class=cl><span class=sd>            # - 인라인 코드 보호: 한 줄 내의 백틱 영역 스킵
</span></span></span><span class=line><span class=cl><span class=sd>            # - 위키링크 변환 `![[]]` -&gt; `![]()` 및 표준링크 프리픽스 보정을 한 번의 스캔으로 처리
</span></span></span><span class=line><span class=cl><span class=sd>            perl -i -0777 -pe &#39;
</span></span></span><span class=line><span class=cl><span class=sd>              s/
</span></span></span><span class=line><span class=cl><span class=sd>                (?:^|\n)(`{3,})[\s\S]*?\n\1(?:\n|$) (*SKIP)(*F) |
</span></span></span><span class=line><span class=cl><span class=sd>                `[^`\n]+` (*SKIP)(*F) |
</span></span></span><span class=line><span class=cl><span class=sd>                (?:
</span></span></span><span class=line><span class=cl><span class=sd>                  !\[\[(?!https?:\/\/)(.*?)\]\] |
</span></span></span><span class=line><span class=cl><span class=sd>                  !\[(.*?)\]\((?!https?:\/\/|\/assets\/images\/)(.*?)\)
</span></span></span><span class=line><span class=cl><span class=sd>                )
</span></span></span><span class=line><span class=cl><span class=sd>              /
</span></span></span><span class=line><span class=cl><span class=sd>                $2 ? &#34;![](\/assets\/images\/$2)&#34; : &#34;!\[$3\](\/assets\/images\/$4)&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              /gex&#39; &#34;$dest&#34;
</span></span></span><span class=line><span class=cl><span class=sd>            
</span></span></span><span class=line><span class=cl><span class=sd>            # [추가] publish: false 발견 시 바로 다음 줄에 draft: true 삽입, Hugo에서 제공하는 front matter 활용
</span></span></span><span class=line><span class=cl><span class=sd>            # s/찾을패턴/대체패턴/g 활용
</span></span></span><span class=line><span class=cl><span class=sd>            perl -i -pe &#39;s/^(publish:\s*false)/$1\ndraft: true/g&#39; &#34;$dest&#34;
</span></span></span><span class=line><span class=cl><span class=sd>            perl -i -pe &#39;s/^(publish:\s*true)/$1\ndraft: false/g&#39; &#34;$dest&#34;
</span></span></span><span class=line><span class=cl><span class=sd>            
</span></span></span><span class=line><span class=cl><span class=sd>            perl -i -pe &#39;s/^image:\s*$/# image: /g&#39; &#34;$dest&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          done
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          # 5. rsync를 이용한 UPSERT (변경 상태 비교 및 동기화)
</span></span></span><span class=line><span class=cl><span class=sd>          # --checksum: 파일 내용이 실제로 변했는지 체크
</span></span></span><span class=line><span class=cl><span class=sd>          rsync -av --checksum temp_posts/ hugo-dest/content/post/
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          # IFS 복구
</span></span></span><span class=line><span class=cl><span class=sd>          IFS=$SAVEIFS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Push to Hugo Repo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          cd hugo-dest
</span></span></span><span class=line><span class=cl><span class=sd>          git config user.name &#34;github-actions[bot]&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          git config user.email &#34;github-actions[bot]@users.noreply.github.com&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          git add .
</span></span></span><span class=line><span class=cl><span class=sd>          # 변경사항이 있을 때만 커밋
</span></span></span><span class=line><span class=cl><span class=sd>          if ! git diff --cached --quiet; then
</span></span></span><span class=line><span class=cl><span class=sd>            git commit -m &#34;Update posts from Obsidian (at $(date +&#39;%Y-%m-%d %H:%M:%S&#39;))&#34;
</span></span></span><span class=line><span class=cl><span class=sd>            git push origin master
</span></span></span><span class=line><span class=cl><span class=sd>          else
</span></span></span><span class=line><span class=cl><span class=sd>            echo &#34;변경 사항이 없어 배포를 진행하지 않습니다.&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          fi</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="admonition tip"><div class=admonition-header><svg viewBox="0 0 384 512"><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2 5.2-7.1 10.4-14.2 15.4-21.4 19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2.0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3 5 7.2 10.2 14.3 15.4 21.4 19.8 27.1 39.7 54.4 49.2 86.2h160zM192 512c44.2.0 80-35.8 80-80v-16H112v16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112 8.8.0 16 7.2 16 16s-7.2 16-16 16c-44.2.0-80 35.8-80 80z"/></svg>
<span>Tip</span></div><div class=admonition-content><p>마크다운 표준에서는 코드 블록 내부에 <code>```</code>이 들어갈 경우 외부 감싸개는 그보다 많은 백틱 4개(<code>````</code>)를 사용하도록 권장한다.</p><p>만약 코드 내부에 백틱 4개가 들어있다면 외부는 5개로 감싸야 하며, 이 개수에는 제한이 없다.
반드시 바깥쪽이 안쪽보다 최소 1개는 더 많아야 한다.</p></div></div><h4 id=파일-탐색-방식-기술-비교>파일 탐색 방식 기술 비교</h4><div class=table-wrapper><table><thead><tr><th>방식</th><th>기술적 명칭</th><th>특징 (비유)</th><th>효율성</th></tr></thead><tbody><tr><td><strong><code>grep</code></strong></td><td>고속 전수 조사</td><td>책을 아주 빨리 넘기며 단어를 찾지만, <strong>결국 끝까지 다 읽음</strong>.</td><td><strong>중간</strong> (단순하지만 낭비 있음)</td></tr><tr><td><strong><code>find + head</code></strong></td><td>개별 정밀 조사</td><td>책 한 권을 꺼내 <strong>앞부분만 보고 다시 꽂기를 반복</strong>. (책을 꺼내고 넣는 동작이 너무 많음)</td><td><strong>낮음</strong> (오버헤드 큼)</td></tr><tr><td><strong><code>awk</code></strong></td><td>조건부 조기 종료 스캔</td><td>책을 펼쳐 <strong>앞부분에 단어가 없으면 즉시 다음 책으로 넘어감</strong>.</td><td><strong>최상</strong> (가장 지능적임)</td></tr></tbody></table></div><h3 id=이미지가-왜-자꾸-안-나와>이미지가 왜 자꾸 안 나와?</h3><p>Obsidian 저장소, Hugo 저장소에서 Asssets 저장소를 서브 모듈로 등록했다.
로컬 앱에선 이미지가 잘 보인다. 근데 Hugo 빌드 및 배포하면 포스팅에 이미지가 안 나온다?</p><p>Hugo는 내부적으로 루트에 assets 폴더가 있고 static 폴더는 정적 리소스로 빌드에 포함된다.
assets 하위 img 폴더는 사이트 UI에 사용되는 것 같은데 static 폴더에 등록해둔 서브 모듈의 소스는 왜 배포된 포스팅에 제대로 노출이 안 되지?</p><p>GitHub 저장소의 소스를 다른 곳에 서빙하기 위한 권한 문제인가?
프리픽스가 잘못됐나? 그냥 루트의 assets 폴더에 배치해야 하나?
근데 static 폴더가 정적 리소스로 사용하기 위해 설계된 구조인데 왜지?</p><p>Hugo 저장소 GitHub Actions의 yml에서 submodule 정의를 하지 않아서 빌드할 때 포함되지 않았던 것. 빌드할 때 submodule에 대한 정의가 없어서 그냥 빈 폴더처럼 다루고 있었던 것이었다. 경로는 내가 계획한 게 맞았고 Actions 실행되는 동안 내부적으로 그 소스에 접근해서 빌드를 생성할 수 있게 설정이 필요했다.</p><p>올바르게 구성하고 이미지 확인까지 한 후 기존의 포스팅을 다시 점검하는 시간을 가지게 됐다.</p><h3 id=properties-관리>Properties 관리</h3><p>문서 상단 Properties를 표준화해서 관리한다면 이후에 다른 모듈로 변경할 때 상당히 간편한 전환을 기대할 수 있겠다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>publish</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>draft</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=l>문서 제목</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>문서 설명</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>author</span><span class=p>:</span><span class=w> </span><span class=l>작성자</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>date</span><span class=p>:</span><span class=w> </span><span class=l>작성일시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>categories</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>Level1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>Level2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>tags</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>tag1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>tag2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>Status</span><span class=p>:</span><span class=w> </span><span class=l>ToDo</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=상태-유지형-업데이트-개선-방향>상태 유지형 업데이트 개선 방향</h3><p>현재는 문서량이 적으므로 전수 조사 후 전체 복사 방식이 가장 에러가 없고 관리하기 편하다.</p><p>지금처럼 모두 지우고 새로 복사하는 것이 아니라 <strong>파일의 변경 상태를 비교</strong>하여 필요한 동작만 수행하는 방식으로 개선해보자.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># AS-IS: 전체 삭제 후 복사</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># 1. 일단 다 지움 (이 때문에 Git 히스토리가 매번 끊김)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>rm -rf hugo-dest/content/post/*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>mkdir -p hugo-dest/content/post/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># 2. 파일마다 바로 Hugo 저장소로 복사</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>for file in $PUBLISH_FILES; do</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>dest=&#34;hugo-dest/content/post/$filename&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>cp &#34;$file&#34; &#34;$dest&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 여기서 치환을 수행 (치환 중 실패하면 Hugo 저장소 파일이 오염됨)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>done</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># TO-BE: 임시 폴더 작업 후 rsync 동기화</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># 1. 기존 파일을 지우지 않고 임시 작업장 생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>mkdir -p temp_posts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># 2. 임시 폴더에서 안전하게 모든 변환 완료</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>for file in $PUBLISH_FILES; do</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>dest=&#34;temp_posts/$filename&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>cp &#34;$file&#34; &#34;$dest&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Perl 치환 수행 (성공한 결과물만 임시 폴더에 쌓임)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>done</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># 3. rsync로 실제 바뀐 파일만 골라서 Hugo 저장소에 &#39;동기화&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>rsync -av --checksum temp_posts/ hugo-dest/content/post/</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>&ldquo;신규 게시, 업데이트하고 싶은 건 <code>Resource</code>로 가져온다"는 단 하나의 원칙만 지키면 된다.
<strong>Obsidian은 UPSERT에 집중하고 Hugo는 게시 상태를 판단한다.</strong></p><ul><li><strong>수정(Update):</strong> <code>Resource</code>에서 내용을 고치고 배포하면 Hugo에 이미 있는 같은 이름의 파일을 덮어쓴다.</li><li><strong>누적(Accumulate):</strong> <code>Resource</code>에서 작업이 끝나 <code>Area</code>로 옮겨버려도 다음 배포 시 <code>Resource</code>만 스캔하므로 Hugo에 이미 들어가 있는 파일은 건드리지 않고 그대로 유지된다.</li></ul><div class="admonition info"><div class=admonition-header><svg viewBox="0 0 512 512"><path d="M256 512A256 256 0 10256 0a256 256 0 100 512zM216 336h24v-64h-24c-13.3.0-24-10.7-24-24s10.7-24 24-24h48c13.3.0 24 10.7 24 24v88h8c13.3.0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3.0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 110 64 32 32 0 110-64z"/></svg>
<span>Info</span></div><div class=admonition-content><p><a class=link href=https://gohugo.io/content-management/front-matter/ target=_blank rel=noopener>Hugo - Front matter</a>
문서 상단 속성의 <code>publish</code> 값으로 게시 상태를 판단하려고 했는데 Hugo에서 기본적으로 <code>draft</code> 값으로 게시 상태를 다룰 수 있어서 이걸 활용한다.</p></div></div><h2 id=결론>🎯결론</h2><p>옵시디언 데이터를 SSoT로 삼아 GitHub Actions 환경에서 입맛에 맞게 소스를 가공한 뒤 원하는 배포 툴을 이용해 빌드 및 배포하며 GitHub 저장소를 활용해서 첨부 파일을 서빙하는 구조를 완성했다.</p><p>각 저장소가 어떤 책임을 가지는지, GitHub Actions에서 어떤 처리를 해주면 처리가 간편해지는지 고민해볼 수 있어서 좋았다.</p><p>호스팅 쓰자. 🙂</p><h2 id=endnote>⚙️EndNote</h2><h3 id=사전-지식>사전 지식</h3><ul><li><strong>Static Site Generator (SSG)</strong>: 정적 사이트 생성기. 마크다운 같은 텍스트 파일을 빌드 시점에 정적 HTML로 변환해주는 도구로 Hugo, Jekyll, Quartz 등이 대표적이다.</li><li><strong>Git Submodule</strong>: 하나의 Git 저장소 안에 다른 Git 저장소를 하위 폴더로 포함하는 기능이다.</li><li><strong>GitHub Actions (CI/CD)</strong>: 코드가 Push될 때 특정 작업을 자동으로 수행하는 도구다. 여기서는 문서 필터링, 문법 치환, 파일 전송의 자동화 엔진 역할을 한다.</li><li><strong>Regular Expression (Regex)</strong>: 정규표현식. 특정 패턴의 텍스트를 찾고 바꾸는 규칙이다. 위키링크(<code>![[]]</code>)를 마크다운 링크(<code>![]()</code>)로 변환하는 등에 핵심적으로 사용된다.</li></ul><h3 id=더-알아보기>더 알아보기</h3><ul><li><strong>PARA Method</strong>: 디지털 정보를 관리하는 4단계 체계(Project, Area, Resource, Archive)로, 효율적인 노트 관리를 돕는 프레임워크. <a class=link href=https://fortelabs.com/blog/para/ target=_blank rel=noopener>Tiago Forte의 공식 웹사이트</a>에서 더 상세한 내용을 볼 수 있다.</li><li><strong>Hugo Documentation</strong>: 세계에서 가장 빠른 SSG인 Hugo의 공식 문서. <a class=link href=https://gohugo.io/ target=_blank rel=noopener>gohugo.io</a>에서 다양한 테마와 빌드 옵션을 확인할 수 있다.</li><li><strong>GitHub Fine-grained PAT</strong>: 기존 Classic 토큰보다 보안이 강화된 세분화된 접근 토큰 설정 방법이다. 특정 저장소에만 읽기/쓰기 권한을 부여하는 방법 등 권한 관련 학습하면 좋다.</li><li><strong>Perl One-liner</strong>: 스크립트 파일 없이 터미널에서 즉시 실행하는 Perl 명령어 활용법이다. 대용량 파일의 스트림 기반 텍스트 처리에 강력한 성능을 발휘한다.</li><li><strong>Incremental Builds</strong>: 모든 파일을 다시 빌드하지 않고 변경된 파일만 처리하는 방식이다. <code>git diff</code> 활용 전략을 확장하여 빌드 시간을 더 단축하는 방법을 탐구해 볼 수 있다.</li></ul></section><footer class=article-footer><div style=margin-top:2rem;text-align:center><a href=https://www.buymeacoffee.com/b9f1 target=_blank><img src=https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png alt="Buy Me A Coffee" style=height:60px!important;width:217px!important></a></div><section class=article-tags><a href=/tags/devlog/>Devlog</a>
<a href=/tags/obsidian/>Obsidian</a>
<a href=/tags/blog/>Blog</a>
<a href=/tags/infra/>Infra</a>
<a href=/tags/ci/cd/>CI/CD</a>
<a href=/tags/%EC%98%B5%EC%8B%9C%EB%94%94%EC%96%B8/>옵시디언</a>
<a href=/tags/%ED%86%B5%ED%95%A9%EB%B0%B0%ED%8F%AC/>통합배포</a>
<a href=/tags/%EC%9C%A0%EC%A7%80%EC%9A%B4%EC%98%81/>유지운영</a>
<a href=/tags/ssot/>SSoT</a>
<a href=/tags/quartz/>Quartz</a>
<a href=/tags/jekyll/>Jekyll</a>
<a href=/tags/hugo/>Hugo</a>
<a href=/tags/submodule/>Submodule</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=[".main-article",".widget--toc"];e.forEach(e=>{const t=document.querySelector(e);t&&renderMathInElement(t,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})})</script></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/2025-08-03-github-actions-triggers-and-scenarios/><div class=article-details><h2 class=article-title>GitHub Actions 트리거와 시나리오</h2></div></a></article><article><a href=/p/2025-12-30-the-zettelkasten-x-para/><div class=article-details><h2 class=article-title>Zettelkasten x PARA</h2></div></a></article><article><a href=/p/2025-10-16-deploy-aws-elasticache-redis/><div class=article-details><h2 class=article-title>AWS ElastiCache Redis 배포</h2></div></a></article><article><a href=/p/2025-10-16-kafka-vs-confluent-open-source-and-managed-data-streaming-infrastructure/><div class=article-details><h2 class=article-title>Kafka vs Confluent</h2></div></a></article><article><a href=/p/2025-10-15-git-multi-ssh-key-management/><div class=article-details><h2 class=article-title>Git 멀티 SSH 키 관리</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=nine-j/nine-j.github.io data-repo-id=R_kgDOOqUgZw data-category=General data-category-id=DIC_kwDOOqUgZ84CqLyQ data-mapping=url data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"noborder_gray")}})()</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2026 B9F1</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script src=https://cdn.jsdelivr.net/npm/d3@latest/dist/d3.min.js></script><script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><script src=/js/render-mermaid-with-zoom.0f7ce55dcbbd8b82e2cba380d549fe98ec497a290fd7a2f39742798cacfa17c3.js></script></body></html>